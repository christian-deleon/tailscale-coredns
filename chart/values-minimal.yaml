# Minimal values for tailscale-coredns
# This file contains minimal settings for simple deployments

# Image configuration
image:
  repository: tailscale-coredns
  tag: "latest"
  pullPolicy: IfNotPresent

# Service account
serviceAccount:
  create: true

# Pod security context
podSecurityContext:
  fsGroup: 1000
  runAsNonRoot: true
  runAsUser: 1000

# Container security context
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    add:
      - NET_ADMIN
    drop:
      - ALL
  readOnlyRootFilesystem: false
  runAsNonRoot: true
  runAsUser: 1000

# Tailscale configuration
tailscale:
  # These must be set via --set or environment variables
  authKey: ""
  domain: ""
  hostname: "coredns"
  hostsFile: "/etc/ts-dns/hosts/custom_hosts"
  forwardTo: "8.8.8.8"
  ephemeral: true
  refreshInterval: 30

# CoreDNS configuration
coredns:
  customHosts: ""
  additionalConfig: ""
  logLevel: "info"

# Service configuration
# Note: For Split DNS with Tailscale, you typically don't need a service exposed externally.
# The CoreDNS instance will be accessed directly by Tailscale nodes.
service:
  enabled: false
  type: ClusterIP
  port: 53
  targetPort: 53

# Minimal resources
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Persistent volume configuration
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 1Gi

# Health checks
livenessProbe:
  enabled: true
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1

readinessProbe:
  enabled: true
  initialDelaySeconds: 5
  periodSeconds: 5
  timeoutSeconds: 3
  failureThreshold: 3
  successThreshold: 1 